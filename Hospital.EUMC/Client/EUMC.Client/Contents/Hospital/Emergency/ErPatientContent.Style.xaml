<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:sys="clr-namespace:System;assembly=mscorlib"
                    xmlns:local="clr-namespace:EUMC.Client"
                    xmlns:ui="clr-namespace:UIControls;assembly=UIControls"
                    xmlns:common="clr-namespace:ServiceCommon;assembly=ServiceCommon">

  <SolidColorBrush x:Key="Finished" Color="#711AEE" />
  <SolidColorBrush x:Key="Progress" Color="#4967FF" />

  <DataTemplate DataType="{x:Type local:EmergencyPatientState}">

    <Grid>
      <Ellipse Width="64" Height="64">
        <Ellipse.Style>
          <Style TargetType="{x:Type Ellipse}">
            <Setter Property="Stroke" Value="{Binding Color}" />
            <Setter Property="StrokeThickness" Value="4" />
            <Setter Property="Fill" Value="White" />

            <Style.Triggers>
              <DataTrigger Binding="{Binding Finished}" Value="true">
                <Setter Property="StrokeThickness" Value="0" />
                <Setter Property="Fill" Value="{Binding Color}" />
              </DataTrigger>
            </Style.Triggers>
          </Style>
        </Ellipse.Style>
      </Ellipse>

      <Border>
        <Label Content="{Binding State}">
          <Label.Resources>
            <Style TargetType="{x:Type Label}" BasedOn="{StaticResource CommonLabel}">
              <Setter Property="FontSize" Value="24" />
              <Setter Property="Foreground" Value="{Binding Color}" />
              <Style.Triggers>
                <DataTrigger Binding="{Binding Finished}" Value="true">
                  <Setter Property="Foreground" Value="White" />
                </DataTrigger>
              </Style.Triggers>
            </Style>
          </Label.Resources>
        </Label>
      </Border>
    </Grid>
  </DataTemplate>

  <DataTemplate DataType="{x:Type local:ErPatientContentVM}">
    <Grid DataContext="{Binding ITEM}">
      <Grid>
        <Grid.Resources>
          <sys:Int32 x:Key="COLUMNS">11</sys:Int32>
          <sys:String x:Key="COLUMN_VALUES">1.32*,1.3*,0.85*,0.9*,0.8*,1*,1*,1*,1*,1*,1*</sys:String>
        </Grid.Resources>

        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="3.8*" />
          <ColumnDefinition Width="1*" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
          <RowDefinition Height="*" />
          <RowDefinition Height="82" />
        </Grid.RowDefinitions>

        <!-- [0,0] 응급환자 목록 -->
        <Grid Grid.Row="0" Grid.Column="0">
          <Grid.RowDefinitions>
            <RowDefinition Height="84" />
            <RowDefinition Height="*" />
          </Grid.RowDefinitions>

          <!-- 0. Header -->
          <ui:TableGrid Grid.Row="0"
                         RowCount="1"
                         ColumnCount="{StaticResource COLUMNS}" ColumnValues="{StaticResource COLUMN_VALUES}"
                         DrawOutterBorder="False"
                         ColumnLineRatio="0.7"
                         Background="{StaticResource primary}"
                         BorderBrush="White"
                         BorderThickness="1">
            <Grid.Resources>
              <Style TargetType="{x:Type Label}" BasedOn="{StaticResource CommonLabel}">
                <Setter Property="Foreground" Value="White" />
                <Setter Property="FontSize" Value="32" />
                <Setter Property="FontWeight" Value="Bold" />
              </Style>
            </Grid.Resources>

            <Label Grid.Column="0" Content="응급구역" />
            <Label Grid.Column="1" Content="환자명" />
            <Label Grid.Column="2" Content="성별" />
            <Label Grid.Column="3" Content="나이" />
            <Label Grid.Column="4" Content="중증도" />
            <Label Grid.Column="5" Content="의사초진" />
            <Border Grid.Column="6" HorizontalAlignment="Center" VerticalAlignment="Center">
              <TextBlock Text="초기 영상검사" TextWrapping="Wrap" Foreground="White"
                         FontSize="32" FontWeight="Bold" TextAlignment="Center" />
            </Border>
            <Border Grid.Column="7" HorizontalAlignment="Center" VerticalAlignment="Center">
              <TextBlock Text="초기 혈액검사" TextWrapping="Wrap" Foreground="White"
                         FontSize="32" FontWeight="Bold" TextAlignment="Center" />
            </Border>

            <Border Grid.Column="8" HorizontalAlignment="Center" VerticalAlignment="Center">
              <TextBlock Text="담당과 진료" TextWrapping="Wrap" Foreground="White"
                         FontSize="32" FontWeight="Bold" TextAlignment="Center" />
            </Border>

            <Label Grid.Column="9" Content="입퇴원" />
            <Label Grid.Column="10" Content="병실배정" />
          </ui:TableGrid>

          <!-- 1. 환자  -->
          <Grid Grid.Row="1">
            <!-- background -->
            <ui:TableGrid ColumnCount="{StaticResource COLUMNS}"
                             ColumnValues="{StaticResource COLUMN_VALUES}"
                             RowCount="{Binding CONFIG.ItemRows}"
                             BorderBrush="{StaticResource primary}"
                             BorderThickness="1">
              <ui:TableGrid.RowBackgroundBrushes>
                <ui:BrushValue Color="White" />
                <ui:BrushValue Color="{StaticResource grid_row_bg_2}" />
              </ui:TableGrid.RowBackgroundBrushes>
            </ui:TableGrid>

            <!-- patient -->
            <ItemsControl ItemsSource="{Binding Patients}">
              <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                  <UniformGrid Rows="{Binding CONFIG.ItemRows}" Columns="1" />
                </ItemsPanelTemplate>
              </ItemsControl.ItemsPanel>
              <ItemsControl.ItemTemplate>
                <DataTemplate>
                  <ui:TableGrid RowCount="1"

                                   ColumnCount="{StaticResource COLUMNS}"
                                   ColumnValues="{StaticResource COLUMN_VALUES}">
                    <Grid.Resources>
                      <Style TargetType="{x:Type Label}" BasedOn="{StaticResource CommonLabel}">
                        <Setter Property="Foreground" Value="{StaticResource Gray800}" />
                        <Setter Property="FontSize" Value="44" />
                        <Setter Property="FontWeight" Value="Bold" />
                      </Style>
                    </Grid.Resources>

                    <Label Grid.Column="0" Content="{Binding AreaName}" />
                    <Label Grid.Column="1" Content="{Binding PatientName}" />
                    <Label Grid.Column="2" Content="{Binding Gender}" />
                    <Label Grid.Column="3" Content="{Binding Age}" />

                    <Ellipse Grid.Column="4" Width="50" Height="50">
                      <Ellipse.Style>
                        <Style TargetType="{x:Type Ellipse}">
                          <Setter Property="Fill" Value="Transparent" />
                          <Style.Triggers>
                            <DataTrigger Binding="{Binding KtasCode}" Value="{x:Static common:ER_KTAS.High}">
                              <Setter Property="Fill" Value="{StaticResource ktasHigh}" />
                            </DataTrigger>
                            <DataTrigger Binding="{Binding KtasCode}" Value="{x:Static common:ER_KTAS.Medium}">
                              <Setter Property="Fill" Value="{StaticResource ktasMedium}" />
                            </DataTrigger>
                            <DataTrigger Binding="{Binding KtasCode}" Value="{x:Static common:ER_KTAS.Low}">
                              <Setter Property="Fill" Value="{StaticResource ktasLow}" />
                            </DataTrigger>
                          </Style.Triggers>
                        </Style>
                      </Ellipse.Style>
                    </Ellipse>

                    <!-- 의사 초진 -->
                    <Image Grid.Column="5" Width="64" Height="64">
                      <Image.Style>
                        <Style TargetType="{x:Type Image}">
                          <Setter Property="Source" Value="{x:Null}" />
                          <Style.Triggers>
                            <DataTrigger Binding="{Binding IsFirstVisit}" Value="True">
                              <Setter Property="Source" Value="{StaticResource er_visit_doctor}" />
                            </DataTrigger>
                          </Style.Triggers>
                        </Style>
                      </Image.Style>
                    </Image>

                    <!-- 영상검사 -->
                    <Image Grid.Column="6" Width="64" Height="64">
                      <Image.Style>
                        <Style TargetType="{x:Type Image}">
                          <Setter Property="Source" Value="{x:Null}" />
                          <Style.Triggers>
                            <DataTrigger Binding="{Binding RadioStateCode}" Value="{x:Static common:ER_RADIO_STATE.Wait}">
                              <Setter Property="Source" Value="{StaticResource er_radio_wait}" />
                            </DataTrigger>
                            <DataTrigger Binding="{Binding RadioStateCode}" Value="{x:Static common:ER_RADIO_STATE.Finished}">
                              <Setter Property="Source" Value="{StaticResource er_radio_finished}" />
                            </DataTrigger>
                          </Style.Triggers>
                        </Style>
                      </Image.Style>
                    </Image>

                    <!-- 혈액검사 -->
                    <Image Grid.Column="7" Width="64" Height="64">
                      <Image.Style>
                        <Style TargetType="{x:Type Image}">
                          <Setter Property="Source" Value="{x:Null}" />
                          <Style.Triggers>
                            <DataTrigger Binding="{Binding BloodStateCode}" Value="{x:Static common:ER_BLOOD_STATE.Progress}">
                              <Setter Property="Source" Value="{StaticResource er_blood_progress}" />
                            </DataTrigger>
                            <DataTrigger Binding="{Binding BloodStateCode}" Value="{x:Static common:ER_BLOOD_STATE.Inspecting}">
                              <Setter Property="Source" Value="{StaticResource er_blood_inspecting}" />
                            </DataTrigger>
                            <DataTrigger Binding="{Binding BloodStateCode}" Value="{x:Static common:ER_BLOOD_STATE.Finished}">
                              <Setter Property="Source" Value="{StaticResource er_blood_finished}" />
                            </DataTrigger>
                          </Style.Triggers>
                        </Style>
                      </Image.Style>
                    </Image>

                    <!-- 담당과 진료-->
                    <Image Grid.Column="8" Width="64" Height="64">
                      <Image.Style>
                        <Style TargetType="{x:Type Image}">
                          <Setter Property="Source" Value="{x:Null}" />
                          <Style.Triggers>
                            <DataTrigger Binding="{Binding MedicalStateCode}" Value="{x:Static common:ER_MEDICAL_STATE.Progress}">
                              <Setter Property="Source" Value="{StaticResource er_collabo_progress}" />
                            </DataTrigger>
                            <DataTrigger Binding="{Binding MedicalStateCode}" Value="{x:Static common:ER_MEDICAL_STATE.Visited}">
                              <Setter Property="Source" Value="{StaticResource er_collabo_visited}" />
                            </DataTrigger>
                          </Style.Triggers>
                        </Style>
                      </Image.Style>
                    </Image>
                    <!-- 입퇴원-->
                    <Image Grid.Column="9" Width="64" Height="64">
                      <Image.Style>
                        <Style TargetType="{x:Type Image}">
                          <Setter Property="Source" Value="{x:Null}" />
                          <Style.Triggers>
                            <DataTrigger Binding="{Binding HospitalStateCode}" Value="{x:Static common:ER_HOSPITALIZED_STATE.Hospitalization}">
                              <Setter Property="Source" Value="{StaticResource er_hospitalization}" />
                            </DataTrigger>
                            <DataTrigger Binding="{Binding HospitalStateCode}" Value="{x:Static common:ER_HOSPITALIZED_STATE.Discharged}">
                              <Setter Property="Source" Value="{StaticResource er_discharged}" />
                            </DataTrigger>
                          </Style.Triggers>
                        </Style>
                      </Image.Style>
                    </Image>

                    <!-- 병실배정 -->
                    <Image Grid.Column="10" Width="64" Height="64">
                      <Image.Style>
                        <Style TargetType="{x:Type Image}">
                          <Setter Property="Source" Value="{x:Null}" />
                          <Style.Triggers>
                            <DataTrigger Binding="{Binding WardStateCode}" Value="{x:Static common:ER_WARD_STATE.Waiting}">
                              <Setter Property="Source" Value="{StaticResource er_ward_wait}" />
                            </DataTrigger>
                            <DataTrigger Binding="{Binding WardStateCode}" Value="{x:Static common:ER_WARD_STATE.Assigned}">
                              <Setter Property="Source" Value="{StaticResource er_ward_assign}" />
                            </DataTrigger>
                          </Style.Triggers>
                        </Style>
                      </Image.Style>
                    </Image>
                  </ui:TableGrid>
                </DataTemplate>
              </ItemsControl.ItemTemplate>
            </ItemsControl>
          </Grid>
        </Grid>

        <!-- [0,1] 혼잡도 -->
        <Border Grid.Row="0" Grid.RowSpan="2" Grid.Column="1" Background="White"
              CornerRadius="20" Margin="20"
              BorderBrush="{StaticResource Gray400}" BorderThickness="2">

          <Grid>
            <Grid.RowDefinitions>
              <RowDefinition Height="3*" />
              <RowDefinition Height="3" />
              <RowDefinition Height="4*" />
            </Grid.RowDefinitions>

            <!-- 혼잡도 -->
            <Grid Grid.Row="0">
              <Grid.RowDefinitions>
                <RowDefinition Height="7*" />
                <RowDefinition Height="2*" />
                <RowDefinition Height="3*" />
              </Grid.RowDefinitions>

              <ui:ArcPercentControl Grid.Row="0" Percent="{Binding CongestionPercent}"
                                    HorizontalAlignment="Center" VerticalAlignment="Center" />

              <Border Grid.Row="1">
                <Label FontSize="36" FontWeight="Bold">
                  <Label.Style>
                    <Style TargetType="Label" BasedOn="{StaticResource CommonLabel}">
                      <Setter Property="Content" Value="성인 응급실 혼잡도" />
                      <Style.Triggers>
                        <DataTrigger Binding="{Binding IsChild}" Value="True">
                          <Setter Property="Content" Value="소아 응급실 혼잡도" />
                        </DataTrigger>
                      </Style.Triggers>
                    </Style>
                  </Label.Style>
                </Label>
              </Border>

              <Border Grid.Row="2" HorizontalAlignment="Center">
                <TextBlock>
                  <Run Text="{Binding CongestionPercent}" FontSize="60" FontWeight="Bold" Foreground="#B42318" />
                  <Run Text="%" FontSize="32" FontWeight="Bold" Foreground="#475467" />
                </TextBlock>
              </Border>
            </Grid>

            <Grid Grid.Row="1">
              <Border Background="#A3ADBE" Height="3" Margin="30,0,30,0" />
            </Grid>

            <Grid Grid.Row="2">
              <Grid.RowDefinitions>
                <RowDefinition Height="2*" />
                <RowDefinition Height="4*" />
                <RowDefinition Height="4*" />
              </Grid.RowDefinitions>

              <Border Grid.Row="0" HorizontalAlignment="Center">
                <Label Content="응급실 병상 운영현황" Style="{StaticResource CommonLabel}"
                       FontSize="28" />
              </Border>

              <Border Grid.Row="1" BorderBrush="#FF9C55" BorderThickness="11"
                      CornerRadius="70" Margin="40,0,40,40">
                <Grid>
                  <Grid.RowDefinitions>
                    <RowDefinition Height="1*" />
                    <RowDefinition Height="1.5*" />
                  </Grid.RowDefinitions>

                  <Label Grid.Row="0" Content="재원환자수" Style="{StaticResource CommonLabel}"
                       FontSize="28" VerticalAlignment="Bottom" />

                  <Label Grid.Row="1" Content="{Binding PatientCount}" Style="{StaticResource CommonLabel}"
                       FontSize="52" />
                </Grid>
              </Border>

              <Border Grid.Row="2" BorderBrush="#192576" BorderThickness="11"
                      CornerRadius="70" Margin="40,0,40,40">
                <Grid>
                  <Grid.RowDefinitions>
                    <RowDefinition Height="1*" />
                    <RowDefinition Height="1.5*" />
                  </Grid.RowDefinitions>

                  <Label Grid.Row="0" Content="평균재실시간" Style="{StaticResource CommonLabel}"
                       FontSize="28" VerticalAlignment="Bottom" />

                  <Label Grid.Row="1" Content="{Binding AverageInTime}" Style="{StaticResource CommonLabel}"
                       FontSize="52" />
                </Grid>
              </Border>
            </Grid>
          </Grid>
        </Border>

        <!--[1,0/1] KTAS  -->
        <Grid Grid.Row="1" Grid.Column="0">
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="220" />
            <ColumnDefinition Width="220" />
            <ColumnDefinition Width="220" />
            <ColumnDefinition Width="220" />
            <ColumnDefinition Width="50" />
          </Grid.ColumnDefinitions>
          <Grid.Resources>
            <Style TargetType="{x:Type Label}" BasedOn="{StaticResource CommonLabel}">
              <Setter Property="Foreground" Value="{StaticResource Gray800}" />
              <Setter Property="FontSize" Value="32" />
              <Setter Property="Margin" Value="15,0,15,0" />
              <Setter Property="FontWeight" Value="SemiBold" />
            </Style>
          </Grid.Resources>

          <!-- 0. PageNo -->
          <ContentControl Grid.Column="0" Content="{Binding PAGE}"
                          Visibility="{Binding PAGE.IsRotate, Converter={StaticResource BooleanToVisibilityConverter}}" />

          <Label Grid.Column="1" Content="환자 중증도" />
          <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center">
            <Ellipse Width="37" Height="37" Fill="{StaticResource ktasHigh}" />
            <Label Content="KTAS 1~2" />
          </StackPanel>
          <StackPanel Grid.Column="3" Orientation="Horizontal">
            <Ellipse Width="37" Height="37" Fill="{StaticResource ktasMedium}" />
            <Label Content="KTAS 3" />
          </StackPanel>
          <StackPanel Grid.Column="4" Orientation="Horizontal">
            <Ellipse Width="37" Height="37" Fill="{StaticResource ktasLow}" />
            <Label Content="KTAS 4~5" />
          </StackPanel>
        </Grid>
      </Grid>

      <ContentControl Content="{Binding CallMessages}"
                      Visibility="{Binding CallMessages.ShowPopup, Converter={StaticResource BooleanToVisibilityConverter}}"
                      HorizontalAlignment="Center" VerticalAlignment="Center" />
    </Grid>
  </DataTemplate>
</ResourceDictionary>