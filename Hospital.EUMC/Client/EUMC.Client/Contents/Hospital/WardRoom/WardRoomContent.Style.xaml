<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:sys="clr-namespace:System;assembly=mscorlib"
                    xmlns:ui="clr-namespace:UIControls;assembly=UIControls"
                    xmlns:local="clr-namespace:EUMC.Client">

  <sys:Int32 x:Key="COLUMNS">6</sys:Int32>
  <sys:String x:Key="COLUMN_VALUES">1*, 2.75*, 2.85*, 1.37*, 1.37*, 1.37*</sys:String>

  <!-- title height -->
  <sys:Int32 x:Key="TITLE_HEIGHT">48</sys:Int32>
  <GridLength x:Key="TITLE_HEIGHT_GRID">48</GridLength>

  <!-- header height -->
  <sys:Int32 x:Key="HEADER_HEIGHT">40</sys:Int32>
  <GridLength x:Key="HEADER_HEIGHT_GRID">40</GridLength>

  <!-- row height -->
  <sys:Int32 x:Key="ROW_HEIGHT">48</sys:Int32>

  <DataTemplate DataType="{x:Type local:WardRoom}">
    <Border Background="{StaticResource primary}" Padding="11" Margin="10" VerticalAlignment="Top">
      <Border.Height>
        <MultiBinding Converter="{local:WardRoomHeightConverter}">
          <Binding Source="{StaticResource TITLE_HEIGHT}" />
          <Binding Source="{StaticResource HEADER_HEIGHT}" />
          <Binding Source="{StaticResource ROW_HEIGHT}" />
          <Binding Path="DataContext.Capacity" RelativeSource="{RelativeSource self}" />
          <Binding Source="10" />
        </MultiBinding>
      </Border.Height>
      <Grid>
        <Grid.RowDefinitions>
          <RowDefinition Height="{StaticResource TITLE_HEIGHT_GRID}" />
          <RowDefinition Height="{StaticResource HEADER_HEIGHT_GRID}" />
          <RowDefinition Height="auto" />
        </Grid.RowDefinitions>

        <!-- 0.Title -->
        <Grid Grid.Row="0">
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
          </Grid.ColumnDefinitions>

          <Label Grid.Column="0" Content="{Binding RoomCode}" Style="{StaticResource CommonLabel}"
                 FontSize="32" FontWeight="Bold" HorizontalAlignment="Left" Foreground="White" />

          <Label Grid.Column="1" Content="{Binding Assistant}" Style="{StaticResource CommonLabel}"
                 FontSize="20" FontWeight="Regular" HorizontalAlignment="Right" Foreground="White" />
        </Grid>

        <!-- 1.Header -->
        <Grid Grid.Row="1">
          <!-- 그라데이션 배경 -->
          <Border>
            <Border.Background>
              <LinearGradientBrush StartPoint="0 0" EndPoint="0 1">
                <LinearGradientBrush.GradientStops>
                  <GradientStop Offset="0.0" Color="#6D7BD8" />
                  <GradientStop Offset="0.3" Color="#323D93" />
                  <GradientStop Offset="0.7" Color="#192576" />
                  <GradientStop Offset="1.0" Color="#3F498D" />
                </LinearGradientBrush.GradientStops>
              </LinearGradientBrush>
            </Border.Background>
          </Border>

          <!-- 헤더 -->
          <ui:TableGrid RowCount="1"
                          ColumnCount="{StaticResource COLUMNS}"
                          ColumnValues="{StaticResource COLUMN_VALUES}"
                          DrawOutterBorder="False"
                          ColumnLineRatio="0.7"
                          Background="Transparent"
                          BorderBrush="White"
                          BorderThickness="3">
            <Grid.Resources>
              <Style TargetType="{x:Type Label}" BasedOn="{StaticResource CommonLabel}">
                <Setter Property="Foreground" Value="White" />
                <Setter Property="FontSize" Value="19" />
                <Setter Property="FontWeight" Value="Medium" />
                <Setter Property="VerticalAlignment" Value="Top" />
              </Style>
            </Grid.Resources>

            <Label Grid.Column="0" Content="" />
            <Label Grid.Column="1" Content="환자명" />
            <Label Grid.Column="2" Content="성별/나이" />
            <Label Grid.Column="3" Content="낙상" />
            <Label Grid.Column="4" Content="화재" />
            <Label Grid.Column="5" Content="수술" />
          </ui:TableGrid>
        </Grid>

        <!-- 2. 환자 -->
        <Grid Grid.Row="2">
          <!-- 배경 + 격자 그리기 -->
          <ui:TableGrid Grid.Row="1"
                          RowCount="{Binding Capacity}"
                          ColumnCount="{StaticResource COLUMNS}"
                          ColumnValues="{StaticResource COLUMN_VALUES}"
                          DrawOutterBorder="False"
                          DrawColumnLine="False"
                        Background="White"
                          BorderBrush="{StaticResource primary}"
                          BorderThickness="2">
            <ui:TableGrid.ColumnBackgroundBrushes>
              <ui:BrushValue Color="{StaticResource accent1}" />
              <ui:BrushValue Color="Transparent" />
              <ui:BrushValue Color="Transparent" />
              <ui:BrushValue Color="Transparent" />
              <ui:BrushValue Color="Transparent" />
              <ui:BrushValue Color="Transparent" />
            </ui:TableGrid.ColumnBackgroundBrushes>
          </ui:TableGrid>

          <ItemsControl ItemsSource="{Binding Patients}" Grid.Row="1">
            <ItemsControl.ItemsPanel>
              <ItemsPanelTemplate>
                <UniformGrid Rows="{Binding Capacity}" Columns="1" />
              </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemTemplate>
              <DataTemplate>

                <ui:TableGrid RowCount="1"
                              Height="48"
                              ColumnCount="{StaticResource COLUMNS}"
                              ColumnValues="{StaticResource COLUMN_VALUES}"
                              DrawOutterBorder="False"
                              Background="Transparent"
                              DrawColumnLine="True"
                              DrawRowLine="False"
                              BorderBrush="#DFDFDF"
                              BorderThickness="1">

                  <ui:TableGrid.Resources>
                    <Style TargetType="Label" BasedOn="{StaticResource CommonLabel}">
                      <Setter Property="FontSize" Value="27" />
                      <Setter Property="FontWeight" Value="SemiBold" />
                      <Setter Property="Foreground" Value="Black" />
                      <Setter Property="HorizontalAlignment" Value="Center" />
                      <Setter Property="VerticalAlignment" Value="Center" />
                    </Style>
                  </ui:TableGrid.Resources>

                  <Label Grid.Column="0" Content="{Binding Index}" Foreground="White" />
                  <Label Grid.Column="1" Content="{Binding PatientName}" />
                  <Label Grid.Column="2" Content="{Binding GenderAge}" />
                  <Label Grid.Column="3" Content="{Binding Fall}" />
                  <Label Grid.Column="4" Content="{Binding Fire}" />
                  <Label Grid.Column="5" Content="{Binding Surgery}" />
                </ui:TableGrid>
              </DataTemplate>
            </ItemsControl.ItemTemplate>
          </ItemsControl>
        </Grid>
      </Grid>
    </Border>
  </DataTemplate>

  <DataTemplate DataType="{x:Type local:WardRoomContentVM}">
    <Grid DataContext="{Binding ITEM}">
      <Grid Margin="30">
        <ItemsControl ItemsSource="{Binding Rooms}">
          <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
              <Grid ui:GridHelper.RowCount="{Binding ItemRows}"
                    ui:GridHelper.RowHeight="auto"
                    ui:GridHelper.ColumnCount="{Binding ItemColumns}"
                    ui:GridHelper.ColumnWidth="1*" />
            </ItemsPanelTemplate>
          </ItemsControl.ItemsPanel>
            
          <ItemsControl.ItemContainerStyle>
            <Style>
              <Setter Property="Grid.Row" Value="{Binding GridRow}" />
              <Setter Property="Grid.Column" Value="{Binding GridColumn}" />
            </Style>
          </ItemsControl.ItemContainerStyle>
        </ItemsControl>
      </Grid>

      <!-- popup -->
    </Grid>
  </DataTemplate>
</ResourceDictionary>