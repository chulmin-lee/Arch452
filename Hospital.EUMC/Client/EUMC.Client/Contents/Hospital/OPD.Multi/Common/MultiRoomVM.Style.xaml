<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:sys="clr-namespace:System;assembly=mscorlib"
                    xmlns:ui="clr-namespace:UIControls;assembly=UIControls"
                    xmlns:local="clr-namespace:EUMC.Client">

  <Thickness x:Key="MultiBorderMargin">6,4,6,4</Thickness>

  <DataTemplate DataType="{x:Type local:MultiRoomVM}">
    <Grid Background="White">
      <Grid.RowDefinitions>
        <!-- 0. 진료실/검사실 이름 72 / 90 -->
        <RowDefinition Height="70" />
        <!-- 1. 진료의사 (부서/의사이름/지연사유) -->
        <RowDefinition Height="300" />
        <!-- 2. 환자목록 -->
        <RowDefinition Height="*" />
      </Grid.RowDefinitions>

      <!-- 0. 방이름 -->
      <Border Grid.Row="0" Background="{StaticResource primary2}" Margin="{StaticResource MultiBorderMargin}">
        <ui:TextBorder Text="{Binding RoomName}" FontSize="40" Foreground="White" FontWeight="Medium" />
      </Border>

      <!-- 1. 진료의사 -->
      <Grid Grid.Row="1">
        <!-- IsPanel -->
        <Border Visibility="{Binding IsPanel, Converter={StaticResource BooleanToVisibilityConverter}}"
                Background="#16B1A9"  Margin="{StaticResource MultiBorderMargin}">
          <Label Content="{Binding DoctorName}" Style="{StaticResource CommonLabel}" FontSize="55" Foreground="White" />
        </Border>

        <Border Visibility="{Binding IsPanel, Converter={x:Static ui:ReverseBooleanToVisisibilityConverter.Default}}"
                Background="White"
                BorderBrush="{StaticResource primary}"
                BorderThickness="3,3,3,10" Margin="{StaticResource MultiBorderMargin}">
          <Grid>
            <Grid.RowDefinitions>
              <RowDefinition Height="2*" />
              <RowDefinition Height="1*" />
              <RowDefinition Height="2*" />
              <RowDefinition Height="1*" />
            </Grid.RowDefinitions>

            <Label Grid.Row="0" Content="{Binding DeptName}" Style="{StaticResource CommonLabel}" FontSize="38" FontWeight="Bold" Foreground="Black" />
            <Label Grid.Row="1" Content="{Binding DoctorDeptName}" Style="{StaticResource CommonLabel}" FontSize="38" FontWeight="Bold" Foreground="Black" />
            <Label Grid.Row="2" Content="{Binding DoctorName}" Style="{StaticResource CommonLabel}" FontSize="76" FontWeight="Bold" Foreground="Black" />
            <Border Grid.Row="3" Visibility="{Binding ShowDelay, Converter={StaticResource BooleanToVisibilityConverter}}">
              <Label Content="{Binding DelayMessage}" Foreground="Black"
                       HorizontalAlignment="Right" Margin="0,0,5,0" VerticalAlignment="Bottom"
                       FontSize="20" FontWeight="Bold" />
            </Border>
          </Grid>
        </Border>
      </Grid>

      <!-- 3. 환자 목록 -->
      <ItemsControl Grid.Row="2" ItemsSource="{Binding Patients}" Tag="{Binding .}">
        <ItemsControl.ItemsPanel>
          <ItemsPanelTemplate>
            <UniformGrid Rows="{Binding ItemRows}" Columns="1" />
          </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <ItemsControl.ItemTemplate>
          <DataTemplate>
            <Border BorderBrush="{StaticResource primary}" BorderThickness="3" Margin="{StaticResource MultiBorderMargin}">
              <Border.Resources>
                <Style TargetType="{x:Type Border}">
                  <Setter Property="Background" Value="White" />
                  <Style.Triggers>
                    <DataTrigger Binding="{Binding Tag.IsPanel, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}" Value="True">
                      <Setter Property="Background" Value="{StaticResource primary}" />
                    </DataTrigger>
                  </Style.Triggers>
                </Style>
              </Border.Resources>

              <ui:TextBorder Text="{Binding PatientName}" FontWeight="Medium"  HorizontalAlignment="Center">
                <ui:TextBorder.Resources>
                  <Style TargetType="{x:Type ui:TextBorder}" BasedOn="{StaticResource {x:Type ui:TextBorder}}">
                    <Setter Property="FontSize" Value="65" />
                    <Setter Property="Foreground" Value="{StaticResource primary2}" />
                    <Style.Triggers>
                      <DataTrigger Binding="{Binding IsPanel}" Value="True">
                        <Setter Property="FontSize" Value="45" />
                        <Setter Property="Foreground" Value="White" />
                      </DataTrigger>
                    </Style.Triggers>
                  </Style>
                </ui:TextBorder.Resources>
              </ui:TextBorder>
            </Border>
          </DataTemplate>
        </ItemsControl.ItemTemplate>
      </ItemsControl>
    </Grid>
  </DataTemplate>
</ResourceDictionary>