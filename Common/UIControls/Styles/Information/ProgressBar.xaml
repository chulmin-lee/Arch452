<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:local="clr-namespace:UIControls">

  <Style TargetType="{x:Type ProgressBar}" x:Key="CommonProgressBarStyle">
    <Setter Property="Height" Value="16" />
    <Setter Property="IsIndeterminate" Value="False" />
    <Setter Property="Background" Value="#2ea1d7"/>
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="ProgressBar" >
          <Grid x:Name="TemplateRoot" SnapsToDevicePixels="true">
            <Grid Margin="0,0,70,0">

              <Rectangle x:Name="PART_Track" Fill="Transparent" />

              <Border x:Name="roundBorder" Background="LightGray" CornerRadius="8" />

              <Border x:Name="PART_Indicator" HorizontalAlignment="Left">
                <!-- Rect는 바인딩 안됨 -->
                <!--<Border.Clip>
                  <RectangleGeometry RadiusX="8" RadiusY="8">
                    <RectangleGeometry.Rect>
                      <Rect Width="{Binding ElementName=roundBorder, Path=ActualWidth}" Height="{Binding ElementName=roundBorder, Path=ActualHeight}" />
                    </RectangleGeometry.Rect>
                  </RectangleGeometry>
                </Border.Clip>-->

                <Border.Clip>
                    <MultiBinding Converter="{local:BorderClipConverter}">
                      <Binding Path="ActualWidth" ElementName="roundBorder" />
                      <Binding Path="ActualHeight" ElementName="roundBorder" />
                      <Binding Path="CornerRadius" ElementName="roundBorder" />
                    </MultiBinding>
                  </Border.Clip>

                <Grid x:Name="Foreground">
                  <Rectangle x:Name="Indicator" Fill="{TemplateBinding Background}" />
                </Grid>
              </Border>
            </Grid>
            <Path Name="TextBackground" Fill="#B3B3B3" Data="M 0 0 H 64 A 9 9 0 0 1 64 16 H 0 A 9 9 0 0 0 0 0 z" HorizontalAlignment="Right"/>

            <!-- 소수 둘째 자리 : StringFormat={}{0:F2}%} -->
            <TextBlock HorizontalAlignment="Right" FontSize="12"
                       Text="{Binding RelativeSource={RelativeSource TemplatedParent},Path=Value, StringFormat={}{0:F2}%}"
                       Foreground="Black" Margin="0,0,10,0"/>
          </Grid>
          <ControlTemplate.Triggers>
            <Trigger Property="Value" Value="100">
              <Trigger.Setters>
                <Setter TargetName="TextBackground" Property="Fill" Value="Orange"/>
                <Setter Property="Background" Value="Blue" />
              </Trigger.Setters>
            </Trigger>
          </ControlTemplate.Triggers>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>


</ResourceDictionary>